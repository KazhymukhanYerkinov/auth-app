{"version":3,"sources":["components/Modal/modal.tsx","pages/main-page.tsx","api/api.ts","api/auth-api.ts","redux/auth-reducer.ts","pages/login-page.tsx","redux/redux-store.ts","App.tsx","index.tsx"],"names":["Modal","onCloseModal","isOpen","cls","classNames","className","onClick","MainPage","React","useState","setIsOpen","instance","axios","create","baseURL","interceptors","request","use","Cookie","get","headers","authAPI","email","password","post","then","response","console","log","initialState","isAuth","authReducer","state","action","type","validationSchema","Yup","shape","login","min","max","required","Login","dispatch","useDispatch","initialValues","onSubmit","formData","a","data","isSubmitting","errors","touched","name","placeholder","id","htmlFor","disabled","rootReducer","combineReducers","auth","store","createStore","applyMiddleware","thunkMiddlewere","App","exact","path","render","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4c2d8fed.chunk.js","sourcesContent":["import classNames from 'classnames';\r\n\r\ntype PropsType = {\r\n  onCloseModal: () => void\r\n  isOpen: boolean\r\n}\r\n\r\nconst Modal: React.FC<PropsType> = ({ onCloseModal, isOpen }) => {\r\n\r\n  const cls = classNames('modal', {'open': isOpen});\r\n\r\n  return (\r\n    <div className = {cls}>\r\n      <div className = 'modal__inner'>\r\n\r\n        <div className = 'modal__desc'> Вы действительно хотите выйти? </div>\r\n\r\n        <div className = 'modal__footer'>\r\n          <button className = 'button button__cancel' onClick = { onCloseModal }> Нет </button>\r\n          <button className = 'button button__ok'> Да </button>\r\n        </div>\r\n        \r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Modal;","import React from 'react';\r\nimport { Modal } from \"../components\";\r\n\r\n\r\n\r\nconst MainPage = () => {\r\n    const [isOpen, setIsOpen] = React.useState(false);\r\n\r\n    const onOpenModal = () => {\r\n        setIsOpen(true);\r\n    }\r\n\r\n    const onCloseModal = () => {\r\n        setIsOpen(false)\r\n    }\r\n\r\n    return (\r\n        <div className = 'main'>\r\n            <div className = 'main__inner'>\r\n                <div className = 'main__title'> Welcome to Main Page </div>\r\n                <button className = 'button button__logout' onClick = { onOpenModal }> logout </button>\r\n\r\n                <Modal onCloseModal = { onCloseModal } isOpen = { isOpen }/>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MainPage;\r\n\r\n","import axios from 'axios';\r\nimport Cookie from 'js-cookie';\r\n\r\nexport const instance = axios.create({\r\n    baseURL: 'https://rocky-citadel-41338.herokuapp.com/api/',\r\n})\r\n\r\ninstance.interceptors.request.use(request => {\r\n    if (Cookie.get('access')) {\r\n        request.headers['Authorization'] = `JWT ${Cookie.get('access')}`\r\n    }\r\n    request.headers['Content-Type'] = 'application/json';\r\n    return request;\r\n})\r\n","import { instance } from \"./api\";\r\n\r\nexport const authAPI = {\r\n\r\n  login(email: string, password: string) {\r\n    return instance.post(`auth/login/`, { email, password }).then(response => console.log(response))\r\n  }\r\n\r\n}","import { authAPI } from \"../api/auth-api\";\r\nimport { BaseThunkType, InferActionsTypes } from \"./redux-store\";\r\n\r\nlet initialState = {\r\n  isAuth: false\r\n}\r\n\r\n\r\n\r\n\r\n\r\nconst authReducer = (state = initialState, action: ActionsType) => {\r\n  switch (action.type) {\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport const actions = {\r\n  loginSuccess: () => ({ type: 'auth-reducer/LOGIN_SUCCESS' } as const)\r\n}\r\n\r\n\r\n\r\nexport const login = (email: string, password: string) => async (dispatch: any) => {\r\n  try {\r\n    let data = await authAPI.login(email, password);\r\n    console.log(data);\r\n  } catch (error) {\r\n\r\n  }\r\n}\r\n\r\n\r\nexport type InitialStateType = typeof initialState\r\ntype ActionsType = InferActionsTypes<typeof actions>\r\ntype ThunkType = BaseThunkType<ActionsType>\r\n\r\nexport default authReducer;","import cls from 'classnames';\r\nimport { Field, Form, Formik } from 'formik';\r\nimport { useDispatch } from 'react-redux';\r\nimport * as Yup from 'yup';\r\nimport { login } from '../redux/auth-reducer';\r\n\r\nconst validationSchema = Yup.object().shape({\r\n  login: Yup.string()\r\n    .min(2, 'Минимальная длина 2 символов')\r\n    .max(100, 'Максимальная длина 100 символов')\r\n    .required('Поле, обязательное для заполнения'),\r\n  \r\n  password: Yup.string()\r\n    .min(2, 'Минимальная длина 2 символов')\r\n    .max(100, 'Максимальная длина 100 символов')\r\n    .required('Поле, обязательное для заполнения')\r\n});\r\n\r\n\r\nconst Login:React.FC<PropsType> = () => {\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const onSubmit = (formData: LoginFormType) => {\r\n    dispatch(login(formData.login, formData.password));\r\n  }\r\n\r\n  return (\r\n    <div className='auth'>\r\n\r\n      <div className='auth__inner'>\r\n        <div className='auth__header'>\r\n          Логин\r\n        </div>\r\n        <Formik\r\n          initialValues={{\r\n            login: '',\r\n            password: '',\r\n          }}\r\n          onSubmit={onSubmit}\r\n          validationSchema = { validationSchema }>  \r\n\r\n          {({ isSubmitting, errors, touched }) => (\r\n            <Form>\r\n              <Field\r\n                name='login'  \r\n                className={cls('input', {'input--error': errors.login && touched.login })} \r\n                placeholder='Введите свой email или телефон' \r\n              />\r\n              { errors.login && touched.login && (<span className = 'auth__error'> { errors.login } </span>) }\r\n\r\n              <Field \r\n                name='password' \r\n                className={cls('input', {'input--error': errors.password && touched.password })} \r\n                placeholder='Введите свой пароль' \r\n              />\r\n              { errors.password && touched.password && (<span className = 'auth__error'> { errors.password } </span>) }\r\n\r\n              <div className = 'auth__save-me'>\r\n                <Field id = 'save_me' className = 'checkbox' type = 'checkbox' name = 'save_me' /> \r\n                <label htmlFor = 'save_me' className = 'checkbox__text'> Запомнить меня </label>\r\n              </div>\r\n\r\n              <button className='button button__submit' disabled = { isSubmitting }> Войти </button>\r\n            </Form>\r\n          )}\r\n\r\n        </Formik>\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\ntype LoginFormType = {\r\n  login: string,\r\n  password: string,\r\n}\r\n\r\ntype PropsType = {\r\n\r\n}\r\n\r\nexport default Login;\r\n\r\n\r\n","import thunkMiddlewere, { ThunkAction } from 'redux-thunk';\r\nimport { Action, applyMiddleware, combineReducers, createStore } from 'redux';\r\nimport authReducer from './auth-reducer';\r\n\r\n\r\nlet rootReducer = combineReducers({\r\n  auth: authReducer,\r\n});\r\n\r\n\r\ntype RootReducerType = typeof rootReducer\r\nexport type AppStateType = ReturnType<RootReducerType>\r\n\r\nexport type InferActionsTypes<T> = T extends {[keys: string]: (...args: any[]) => infer U} ? U : never\r\n\r\nexport type BaseThunkType<A extends Action, R = Promise<void>> = ThunkAction<R, AppStateType, unknown, A>\r\n\r\n\r\n\r\n// @ts-ignore\r\nlet store = createStore(rootReducer, applyMiddleware(thunkMiddlewere));\r\n\r\nexport default store;","import { Provider } from 'react-redux';\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\nimport { Login, MainPage } from './pages';\nimport store from './redux/redux-store';\n\n\n\n\nconst App = () => {\n  return (\n    <BrowserRouter>\n      <Provider store = { store }>\n        <Switch>\n          <Route exact path = '/' render = { () => <MainPage /> } />\n          <Route exact path = '/login' render = { () => <Login /> } />\n        </Switch>\n      </Provider>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nimport './scss/app.scss';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}